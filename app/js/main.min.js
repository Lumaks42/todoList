const addBox=document.querySelector(".addBox"),popupBox=document.querySelector(".popupBox"),popupTitle=popupBox.querySelector("header p"),closeIcon=popupBox.querySelector("header .close"),titleTag=popupBox.querySelector("input"),descTag=popupBox.querySelector("textarea"),addBtn=popupBox.querySelector("button");let months=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];const notes=JSON.parse(localStorage.getItem("notes")||"[]");let updateId,isUpdate=!1;function showNotes(){document.querySelectorAll(".note").forEach((e=>e.remove())),notes.forEach(((e,t)=>{let o=`<li class="note">\n                        <div class="ditails">\n                            <p>${e.title}</p>\n                            <span>${e.description}</span>\n                        </div>\n                        <div class="bottomContent">\n                            <span>${e.date}</span>\n                            <div class="settings">\n                                <ion-icon onclick"showMenu(this)" class="elem" name="ellipsis-vertical-outline"></ion-icon>\n                                <ul class="menu">\n                                    <li>\n                                        <ion-icon onclick = "updateNote(${t}, '${e.title}', '${e.description}')" name="pencil-outline"></ion-icon>\n                                    </li>\n                                    <li>\n                                        <ion-icon onclick="deleteNote(${t})" name="trash-outline"></ion-icon>\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                    </li>`;addBox.insertAdjacentHTML("afterend",o),console.log(notes)}))}function deleteNote(e){confirm("Вы уверены что хотите удалить здания?")&&(notes.splice(e,1),localStorage.setItem("notes",JSON.stringify(notes)),showNotes())}function updateNote(e,t,o){isUpdate=!0,updateId=e,addBox.click(),titleTag.value=t,descTag.value=o,addBtn.innerText="Исправить",popupTitle.innerText="Обновить задание",console.log(e,t,o)}addBox.addEventListener("click",(()=>{titleTag.focus(),popupBox.classList.add("show")})),closeIcon.addEventListener("click",(()=>{isUpdate=!1,titleTag.value="",descTag.value="",addBtn.innerText="Добавь новое задание",popupTitle.innerText="Добавь задание",popupBox.classList.remove("show")})),showNotes(),addBtn.addEventListener("click",(e=>{e.preventDefault();let t=titleTag.value,o=descTag.value;if(t||o){let e=new Date,n={title:t,description:o,date:`${months[e.getMonth()]} ${e.getDate()}, ${e.getFullYear()}`};isUpdate?(isUpdate=!1,notes[updateId]=n):notes.push(n),localStorage.setItem("notes",JSON.stringify(notes)),closeIcon.click(),showNotes()}}));